<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Page 1 - Nomina Illustrium</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        /* CSS Fixes for indentation */
        .transcription-content p {
            text-indent: 0 !important;
            padding-left: 0 !important;
            margin-left: 0 !important;
            white-space: normal;
            text-align: left;
        }

        /* Navigation Styles */
        #page-navigator {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
            background: #444;
            color: white;
            margin: 0 10px;
            cursor: pointer;
        }

        /* Cursor Styles */
        .zoomable-image {
            cursor: zoom-in;
        }
        .zoomable-image.is-zoomed {
            cursor: zoom-out;
        }
    </style>
</head>
<body>
    <header>
        <div>
            <a href="../index.html">&larr; Index</a>
            
            <span id="page-indicator">Loading...</span>
            <select id="page-navigator">
                <option>Loading pages...</option>
            </select>

            <a href="page2.html">Next &rarr;</a>
        </div>
    </header>
    
    <div class="sub-page-container">
        <div class="header-section">
            <h2>Page 1</h2>
            <small style="color: #666;">(Click image to zoom)</small>
        </div>

        <div class="image-wrapper">
            <img src="../images/0014.jpg" alt="Sub page visual" class="zoomable-image" title="Click to Zoom">
        </div>

        <div class="content-wrapper">
            <hr> 
            <div class="pane text-pane">
                <div class="metadata">
                    <strong>Source XML:</strong> transcription_0014.xml<br>
                    <strong>Original File:</strong> 0014.jpg
                </div>
                
                <div class="transcription-content">
                    <p>Nomina Illustrium<br>
                    Qui Bibliothecam Regio⸗Electoralem<br>
                    Dresdensem inviserunt.</p>

                    <p>Marquis de Sylva Sereniss. Lusitaniæ Regis ad<br>
                    Aulam Neapolitanam Legatus.<br>
                    Fridericus Moszynski Comt (sig) 1. Jul 1753.<br>
                    Gundaccarus Comes de Sternberg. 3. Jul. 1753.<br>
                    Adolphus Erasmus a Gersdorff. d. 3. Jul: 1753.<br>
                    Johann Friedrich Ernst von Braue 27. Jul. 1753.<br>
                    Dñ Francisco d’Echavarria capitan al<br>
                    Servicio d’espeña —<br>
                    Stephanus de Halmágy Hungarus ex Tramia d. 13a Julÿ. 1753.<br>
                    Dñ Jph Manes. Capitan al servicio d’España —<br>
                    Henri Maurice de Berlepsch. z 3 Julli 1753.<br>
                    Poniatowicz Colonel dans l’Armée de Pologne.<br>
                    Johann Ernst von Zweÿdorff Königl: Page den 30 Jul: 1753<br>
                    Francisc[us] Borouski Præposit. Cracp.<br>
                    Philippe Bourekhard de Leger Capitain le 3. Aout. 1753.<br>
                    Louis de Bachelu Lieutenant Colonel „ „ „ „<br>
                    Jean Baptiste Burekhard de Leger Capitain<br>
                    L’abé de Leger Bachelier de Sorbone. le 3. Aout 1753.<br>
                    Dñ Philipe de Larrea dela Province de Bizcaye, en Espagne d. 6. A.<br>
                    Christophorꝰ Guilielmꝰ de Waldstromer. Noribergensis.<br>
                    Paulus de Stetter. Augustanus<br>
                    J. Martin Walter Major Jng: den 10ten Augst. 1753.<br>
                    Pierre michel hennin Secretaire attaché a l’ambassade de france en Pologne 1753<br>
                    Wolf Christian v. Schönberg Kriegs Rath. d. 11 Augst 1753.<br>
                    Johannes Ernestus Gottlieb Koch. Syndicꝰ Stolberg:<br>
                    d. 11t Augst 1753<br>
                    Johannes Jacobus Spörl ex Norimberga d. 15. Augt 1753</p>
                </div>
            </div>
        </div> 
    </div> 

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- CONFIGURATION ---
        const GITHUB_USERNAME = 'Sheringford'; 
        const GITHUB_REPO = 'slub_besucherbuecher';     
        const FOLDER_PATH = 'pages';             
        
        // Settings for THIS specific page
        const CURRENT_PAGE = 1; 
        // ---------------------

        let totalPages = 5; // Fallback

        const indicator = document.getElementById('page-indicator');
        const select = document.getElementById('page-navigator');

        function updateNavigation(count) {
            if (indicator) indicator.textContent = `Page ${CURRENT_PAGE} of ${count}`;
            if (select) {
                select.innerHTML = '';
                for (let i = 1; i <= count; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `Go to Page ${i}`;
                    if (i === CURRENT_PAGE) option.selected = true;
                    select.appendChild(option);
                }
            }
        }

        // Initial load
        updateNavigation(totalPages);

        // Fetch from GitHub
        const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${FOLDER_PATH}`;

        fetch(apiUrl)
            .then(response => {
                if (!response.ok) throw new Error('API limit or Repo not found');
                return response.json();
            })
            .then(data => {
                const pageFiles = data.filter(file => 
                    file.name.endsWith('.html') && file.name.startsWith('page')
                );
                totalPages = pageFiles.length;
                updateNavigation(totalPages);
            })
            .catch(error => console.warn('GitHub API Error:', error));

        // Dropdown Event
        if (select) {
            select.addEventListener('change', (e) => {
                window.location.href = `page${e.target.value}.html`;
            });
